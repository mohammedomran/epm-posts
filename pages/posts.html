<!doctype html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
            <link href="https://fonts.googleapis.com/css?family=Tajawal" rel="stylesheet">

        <link rel="stylesheet" href="../css/style.css">

        <title>EPM 2019 POSTS</title>
    </head>
    
    <body>

    <h1>SUBJECTS PAGE</h1>
    <div class="subjects"></div>

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script>

        var posts = {
            year2 : {
                
                semster1 : {
                    'subjects' : 'Signals & Systems,Electric Circuits,Magnetic Fields,Mathimatics,Measurements,Thermodynamics'
                } ,
                semster2 : {
                    'subjects' : 'Digital Electronics and Microprocessor,Mathimatics,Electrical Machines,Fluid Mechanics,Measurements,Mechanical Design,Project Management'
                }

            },
            year3 : {
                
                semster1 : {
                    'subjects' : 'Control Systems,Electrical Machines,Power Electronics,Power Systems,High Voltage,Communication'
                } ,
                semster2 : {
                    'subjects' : 'Control Systems,Power Electronics,Power Systems,Electrical Machines,protection,Power Generation,Laboratory'
                }

            },
            year4 : {
                
                semster1 : {
                    'subjects' : 'Control Systems,Electrical Machines,Power Electronics,Power Systems,High Voltage,Communication'
                } ,
                semster2 : {
                    'subjects' : 'protection, HVVVVVVV'
                }

            },
        };

        //FUNCTION TO RECEIVE THE URL SUBJECTS_CODE
        function getQueryVariable(variable)
        {
           var query = window.location.search.substring(1);
           var vars = query.split("&");
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=");
                   if(pair[0] == variable){return pair[1];}
           }
           return(false);
        }
        var subjects_code = getQueryVariable('subjects_code');
        
        //SPLIT SUBJECTS INTO 2 VARS ONE FOR YEAR CODE & ONE FOR SEMSTER CODE
        split_code = subjects_code.split('-');
        year_code = split_code[0];
        semster_code =  split_code[1];
        
        //FUNCTION TO GET SUBJECTS FROM THE ABOVE OBJECT UPON THE SAVED YEAR & SEMSTER CODE ... & THEN SHOW THEM IN THE PAGE
        function get_subjects() {
            var subjects;
            subjects = posts[year_code][semster_code];
            var y = JSON.stringify(Object.values(subjects)).replace('["', '').replace('"]', '').split(',');
            
            count = y.length;
            var counter;
            for(counter = 0; counter < count; counter++) {
                $(".subjects").append("<p>"+ y[counter] +"</p>");
            }
            
        }
        get_subjects();
            
        
        $(".subjects p").on("click", function () {
            subjects_code = subjects_code + "-" + $(this).text().replace(/\s+/g, '_').toLowerCase();
            window.location.href = "content.html?subjects_code="+subjects_code;
        });
    </script>

    </body>
</html>
